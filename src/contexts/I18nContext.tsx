/* eslint-disable react-refresh/only-export-components */
import React, { createContext, useContext, useEffect, useMemo, useState } from 'react';

type Locale = 'en' | 'es' | 'fr';

type TranslationMap = Record<Locale, Record<string, string>>;

const translations: TranslationMap = {
    en: {
        'common.appName': 'Secure Collateral Loans',
        'common.shortName': 'Secure',
        'common.languageLabel': 'Language',
        'common.logout': 'Logout',
        'common.loading': 'Loading...',
        'common.save': 'Save',
        'common.cancel': 'Cancel',
        'common.submit': 'Submit',
        'common.approve': 'Approve',
        'common.reject': 'Reject',
        'common.view': 'View',
        'common.error.generic': 'Something went wrong. Please try again.',
        'common.storage.disabled': 'File uploads are disabled in this environment. Provide text evidence instead.',
        'common.status.active': 'Active',
        'common.status.pending': 'Pending',
        'common.status.rejected': 'Rejected',
        'common.status.approved': 'Approved',
        'common.status.submitted': 'Submitted',
        'common.status.confirmed': 'Confirmed',
        'common.status.underReview': 'Under review',
        'nav.dashboard': 'Dashboard',
        'nav.identity': 'Identity',
        'nav.collateral': 'Collateral',
        'nav.loans': 'Loans',
        'nav.payments': 'Payments',
        'nav.help': 'Help',
        'nav.requests': 'Requests',
        'nav.settings': 'Settings',
        'nav.audit': 'Audit',
        'nav.admin': 'Admin',
        'nav.customer': 'Customer',
        'nav.marketplace': 'Marketplace',
        'nav.support': 'Support',
        'nav.profile': 'My Profile',

        'greeting.morning': 'Good morning',
        'greeting.afternoon': 'Good afternoon',
        'greeting.evening': 'Good evening',

        'dashboard.hello': 'Hello, {name} ðŸ‘‹',
        'dashboard.welcomeText': 'Welcome to Secure financial center. You have {count} active loans today.',
        'dashboard.totalDebt': 'Total Debt',
        'dashboard.estimatedLimit': 'Estimated Limit',
        'dashboard.status.secure': 'Secure Status',
        'dashboard.identity.status': 'Identity',
        'dashboard.identity.verified': 'Verified',
        'dashboard.identity.pending': 'Pending',
        'dashboard.identity.complete': 'Complete Profile',
        'dashboard.activity.title': 'Live Activity',
        'dashboard.activity.subtitle': 'Follow your requests',
        'dashboard.activity.history': 'View History',
        'dashboard.activity.empty': 'No movements yet.',
        'dashboard.store.title': 'Best Deals',
        'dashboard.store.subtitle': 'Special Shop',
        'dashboard.store.cta': 'Go Shopping',
        'dashboard.help.title': 'Any doubts?',
        'dashboard.help.subtitle': '24/7 Support',

        'collateral.manage.title': 'My Items',
        'collateral.manage.subtitle': 'Register items you wish to appraise for immediate liquidity.',
        'collateral.manage.label': 'Asset Management',
        'collateral.add.cta': 'Add Asset',
        'collateral.add.subcta': 'New Pawn',
        'collateral.form.title': 'Asset Registration',
        'collateral.form.subtitle': 'Complete the technical sheet for our team to perform an initial appraisal.',
        'collateral.form.category': 'Asset Category',
        'collateral.form.brandModel': 'Specific Brand and Model',
        'collateral.form.serial': 'Identification (IMEI/SN)',
        'collateral.form.condition': 'Conservation Status',
        'collateral.form.estimatedValue': 'Estimated Value (â‚¬)',
        'collateral.form.photos': 'Photo Archive (Min 3)',
        'collateral.form.addPhoto': 'Add Photo',
        'collateral.form.submit': 'Finish Registration',
        'collateral.list.empty.title': 'Empty Portfolio',
        'collateral.list.empty.subtitle': 'Add your first asset so we can evaluate it and enable your credit line.',
        'collateral.list.requestCredit': 'Request Credit',
        'collateral.status.evaluating': 'Evaluating',

        'store.marketplace.title': 'Appraisal Sales',
        'store.marketplace.subtitle': 'Acquire luxury assets and cutting-edge technology from liquidations.',
        'store.search.placeholder': 'Search by brand or model...',
        'store.opportunity': 'Exclusive Opportunity',
        'store.liquidatedPrice': 'Liquidated Price',
        'store.buy': 'Buy',
        'store.empty.title': 'No results',
        'store.empty.subtitle': 'We found no items matching your search.',

        'identity.center.title': 'Identity Center',
        'identity.center.subtitle': 'Keep your data updated and verify your identity for better rates.',
        'identity.center.label': 'Security & Trust',
        'identity.personal.title': 'Client Data',
        'identity.personal.subtitle': 'Official information for contracts and payments.',
        'identity.personal.submit': 'Update Profile',
        'identity.personal.success': 'Information updated successfully.',
        'identity.personal.error': 'Error processing update.',
        'identity.kyc.title': 'ID Verification',
        'identity.kyc.subtitle': 'Mandatory security documentation.',
        'identity.kyc.verified.title': 'Certified Gold Account',
        'identity.kyc.verified.subtitle': 'Your identity has been verified. You have full access to Secure.',
        'identity.kyc.pending.title': 'Validating',
        'identity.kyc.pending.subtitle': 'We have received your files. We will notify you once validated.',
        'identity.kyc.rejected.title': 'Invalid Document',
        'identity.kyc.front': 'ID Front',
        'identity.kyc.back': 'ID Back',
        'identity.kyc.selfie': 'Selfie with ID',
        'identity.kyc.submit': 'Start Verification',

        'support.title': 'Here to help you',
        'support.subtitle': 'Resolve your doubts in seconds or contact our team directly.',
        'support.label': 'Support Center',
        'support.contact.title': 'Direct Contact',
        'support.contact.subtitle': 'Fast communication channels.',
        'support.contact.call': 'Call us',
        'support.contact.email': 'E-mail',
        'support.contact.hours': 'Hours',
        'support.contact.office': 'Office',
        'support.faq.title': 'Frequently Asked Questions',
        'support.form.title': 'Send Message',
        'support.form.subtitle': 'We will respond in less than 24h.',
        'support.form.subject': 'Subject',
        'support.form.category': 'Category',
        'support.form.message': 'Detailed Message',
        'support.form.submit': 'Send Support Message',
        'support.form.sending': 'Sending...',
        'support.form.success.title': 'Message Sent!',
        'support.form.success.subtitle': 'We have received your request. We will contact you soon at {email}.',
        'support.form.another': 'Send another message',
        'support.form.disclaimer': 'By sending this form, you agree that our team accesses your account info to assist you.',

        'landing.title': 'Fast, secure collateral-backed loans',
        'landing.subtitle':
            'Request short-term funding by leaving approved devices as collateral. Transparent, auditable, and secure.',
        'landing.cta.apply': 'Apply now',
        'landing.cta.login': 'Login',
        'landing.feature.fast': 'Rapid review within 24 hours',
        'landing.feature.secure': 'Bank-grade security and clear audit trails',
        'landing.feature.rates': 'Competitive rates and clear repayment plans',
        'landing.step.register': 'Register',
        'landing.step.kyc': 'Verify identity',
        'landing.step.request': 'Request loan',
        'landing.step.funded': 'Receive funds',
        'landing.footer': 'Â© 2026 Secure. All rights reserved.',

        'auth.login.title': 'Welcome back',
        'auth.login.subtitle': 'Sign in to continue',
        'auth.login.cta': 'Sign in',
        'auth.login.noAccount': "Don't have an account?",
        'auth.login.signup': 'Create account',
        'auth.login.forgot': 'Forgot password?',
        'auth.register.title': 'Create account',
        'auth.register.subtitle': 'Open your secure loan profile',
        'auth.register.cta': 'Create account',
        'auth.register.haveAccount': 'Already have an account?',
        'auth.register.signin': 'Sign in',
        'auth.forgot.title': 'Reset password',
        'auth.forgot.subtitle': 'We will email you reset instructions',
        'auth.forgot.cta': 'Send reset link',
        'auth.reset.sent': 'Check your email for password reset instructions.',
        'auth.error.credentials': 'Invalid credentials. Please try again.',
        'auth.error.passwordMismatch': 'Passwords do not match',
        'auth.error.passwordLength': 'Password must be at least 8 characters',
        'auth.error.inactive': 'Your account is currently {status}. Contact support.',
        'auth.error.roleMissing': 'We could not verify your permissions. Please sign out and sign in again.',

        'field.fullName': 'Full name',
        'field.email': 'Email',
        'field.phone': 'Phone number',
        'field.dob': 'Date of birth',
        'field.password': 'Password',
        'field.confirmPassword': 'Confirm password',
        'field.idType': 'ID type',
        'field.idNumber': 'ID number',
        'field.idExpiry': 'ID expiry date',
        'field.address': 'Address',
        'field.city': 'City',
        'field.postalCode': 'Postal code',
        'field.country': 'Country',
        'field.amount': 'Amount',
        'field.term': 'Term (months)',
        'field.purpose': 'Purpose',
        'field.description': 'Description',
        'field.estimatedValue': 'Estimated value (cents)',
        'field.paymentReference': 'Payment reference',
        'field.paymentMethod': 'Payment method',
        'field.interestRate': 'Interest rate',

        'kyc.id.passport': 'Passport',
        'kyc.id.national': 'National ID',
        'kyc.id.drivers': 'Driver license',

        'loan.new.title': 'Simulate and request a loan',
        'loan.new.subtitle': 'All amounts are stored in integer cents for accuracy.',
        'loan.new.simulation': 'Simulation',
        'loan.new.monthlyPayment': 'Estimated monthly payment',
        'loan.new.totalCost': 'Total repayment',
        'loan.new.submit': 'Submit loan request',
        'loan.new.success': 'Loan request submitted for review.',
        'loan.new.optionalCollateral': 'Optional: link existing collateral',
        'loan.new.termRange': 'Allowed term: {min}-{max} months',
        'loan.new.amountRange': 'Allowed amount: {min} to {max}',

        'collateral.type.vehicle': 'Vehicle',
        'collateral.type.property': 'Property',
        'collateral.type.jewelry': 'Jewelry',
        'collateral.type.electronics': 'Electronics',
        'collateral.type.other': 'Other',

        'loans.list.title': 'Your loans',
        'loans.list.empty': 'No loans found.',
        'loans.details.title': 'Loan details',
        'loans.details.balance': 'Remaining balance',
        'loans.details.status': 'Status',
        'loans.details.payments': 'Payments',

        'payments.title': 'Submit a payment',
        'payments.subtitle': 'Provide payment proof reference. Uploads remain disabled by default.',
        'payments.submit': 'Submit payment',
        'payments.success': 'Payment submitted for confirmation.',
        'payments.confirmedBy': 'Confirmed by',
        'payments.selectLoan': 'Select a loan',
        'payments.proofFileOptional': 'Proof file (optional)',
        'payments.referenceLabel': 'Reference',
        'payments.method.bank_transfer': 'Bank transfer',
        'payments.method.cash': 'Cash',
        'payments.method.card': 'Card',
        'payments.method.mobile_money': 'Mobile money',

        'contract.title': 'Contract & consent',
        'contract.description': 'Review obligations for collateral-backed lending.',
        'contract.point1': 'All disbursements are backed by submitted collateral.',
        'contract.point2': 'Payments are recorded with immutable audit trails.',
        'contract.point3': 'Interest is calculated on the agreed annual rate.',
        'contract.point4': 'Late or missing payments may lead to collateral liquidation.',
        'contract.signatureLabel': 'Type your full legal name to sign',
        'contract.signCta': 'Sign & acknowledge',
        'contract.signed': 'Signature recorded locally for this session: {signature}',

        'loyalty.title': 'Loyalty status',
        'loyalty.subtitle': 'Earn better rates with on-time payments.',
        'loyalty.tier': 'Tier',
        'loyalty.points': 'Points',
        'loyalty.nextTier': 'Next tier at',

        'help.title': 'Help & guidance',
        'help.contact': 'Need help? Contact support.',
        'help.faq.eligibility.q': 'Who can request a loan?',
        'help.faq.eligibility.a': 'Registered customers who complete KYC and provide acceptable collateral.',
        'help.faq.payments.q': 'How do I confirm a payment?',
        'help.faq.payments.a': 'Submit payment reference; admins will review and confirm.',
        'help.faq.uploads.q': 'Why are uploads disabled?',
        'help.faq.uploads.a': 'Storage is locked by default. Enable it only after reviewing security rules.',

        'admin.dashboard.title': 'Admin dashboard',
        'admin.dashboard.subtitle': 'Review requests, manage loans, and enforce controls.',
        'admin.requests.title': 'Loan requests',
        'admin.requests.subtitle': 'Pending and in-review requests',
        'admin.requests.empty': 'No requests yet.',
        'admin.requests.pending': 'Pending',
        'admin.requests.review': 'Review',
        'admin.requestDetails.title': 'Request details',
        'admin.requestDetails.approve': 'Approve and create loan',
        'admin.requestDetails.reject': 'Reject request',
        'admin.requestDetails.rejectionReason': 'Rejection reason',
        'admin.requestDetails.success': 'Decision recorded and audit log created.',

        'admin.loans.title': 'All loans',
        'admin.loans.subtitle': 'Portfolio overview',
        'admin.loans.empty': 'No loans to display.',
        'admin.loanDetails.title': 'Manage loan',
        'admin.loanDetails.confirmPayment': 'Confirm payment',
        'admin.loanDetails.rejectPayment': 'Reject payment',

        'admin.settings.title': 'Business settings',
        'admin.settings.subtitle': 'Configure safe operating limits.',
        'admin.settings.save': 'Update settings',
        'admin.settings.success': 'Settings updated.',
        'admin.settings.maintenance': 'Maintenance mode',
        'admin.settings.maxAmount': 'Max loan amount (cents)',
        'admin.settings.minAmount': 'Min loan amount (cents)',
        'admin.settings.maxTerm': 'Max term (months)',
        'admin.settings.minTerm': 'Min term (months)',

        'admin.audit.title': 'Audit log',
        'admin.audit.subtitle': 'Immutable record of admin actions.',
        'admin.audit.empty': 'No audit entries yet.',
        'nav.clients': 'Clients',
    },
    es: {
        'common.appName': 'PrÃ©stamos con GarantÃ­a Secure',
        'common.shortName': 'Secure',
        'common.languageLabel': 'Idioma',
        'common.logout': 'Cerrar sesiÃ³n',
        'common.loading': 'Cargando...',
        'common.save': 'Guardar',
        'common.cancel': 'Cancelar',
        'common.submit': 'Enviar',
        'common.approve': 'Aprobar',
        'common.reject': 'Rechazar',
        'common.view': 'Ver',
        'common.error.generic': 'Algo saliÃ³ mal. Intenta nuevamente.',
        'common.storage.disabled': 'Las cargas estÃ¡n deshabilitadas. Proporciona evidencia en texto.',
        'common.status.active': 'Activa',
        'common.status.pending': 'Pendiente',
        'common.status.rejected': 'Rechazada',
        'common.status.approved': 'Aprobada',
        'common.status.submitted': 'Enviada',
        'common.status.confirmed': 'Confirmada',
        'common.status.underReview': 'En revisiÃ³n',
        'nav.dashboard': 'Tablero',
        'nav.identity': 'Identidad',
        'nav.collateral': 'GarantÃ­a',
        'nav.loans': 'PrÃ©stamos',
        'nav.payments': 'Pagos',
        'nav.help': 'Ayuda',
        'nav.requests': 'Solicitudes',
        'nav.settings': 'Ajustes',
        'nav.audit': 'AuditorÃ­a',
        'nav.admin': 'Admin',
        'nav.customer': 'Cliente',
        'nav.marketplace': 'Mercado',
        'nav.support': 'Soporte',
        'nav.profile': 'Mi Perfil',

        'greeting.morning': 'Buenos dÃ­as',
        'greeting.afternoon': 'Buenas tardes',
        'greeting.evening': 'Buenas noches',

        'dashboard.hello': 'Hola, {name} ðŸ‘‹',
        'dashboard.welcomeText': 'Bienvenido al centro financiero de Secure. Tienes {count} prÃ©stamos activos hoy.',
        'dashboard.totalDebt': 'Deuda Total',
        'dashboard.estimatedLimit': 'LÃ­mite Estimado',
        'dashboard.status.secure': 'Estatus Secure',
        'dashboard.identity.status': 'Identidad',
        'dashboard.identity.verified': 'Verificado',
        'dashboard.identity.pending': 'Pendiente',
        'dashboard.identity.complete': 'Completar Perfil',
        'dashboard.activity.title': 'Actividad en Vivo',
        'dashboard.activity.subtitle': 'Sigue tus solicitudes',
        'dashboard.activity.history': 'Ver Historial',
        'dashboard.activity.empty': 'AÃºn no tienes movimientos.',
        'dashboard.store.title': 'Mejores Ofertas',
        'dashboard.store.subtitle': 'Tienda Especial',
        'dashboard.store.cta': 'Ir de Compras',
        'dashboard.help.title': 'Â¿Dudas?',
        'dashboard.help.subtitle': 'Soporte 24/7',

        'collateral.manage.title': 'Mis Prendas',
        'collateral.manage.subtitle': 'Registra los artÃ­culos que deseas tasar para obtener liquidez inmediata.',
        'collateral.manage.label': 'GestiÃ³n de Activos',
        'collateral.add.cta': 'AÃ±adir Activo',
        'collateral.add.subcta': 'Nuevo EmpeÃ±o',
        'collateral.form.title': 'Registro de Prenda',
        'collateral.form.subtitle': 'Completa la ficha tÃ©cnica para que nuestro equipo realice una tasaciÃ³n inicial.',
        'collateral.form.category': 'CategorÃ­a de Activo',
        'collateral.form.brandModel': 'Marca y Modelo EspecÃ­fico',
        'collateral.form.serial': 'IdentificaciÃ³n (IMEI/SN)',
        'collateral.form.condition': 'Estado de ConservaciÃ³n',
        'collateral.form.estimatedValue': 'Valor Estimado (â‚¬)',
        'collateral.form.photos': 'Archivo FotogrÃ¡fico (MÃ­nimo 3)',
        'collateral.form.addPhoto': 'AÃ±adir Foto',
        'collateral.form.submit': 'Finalizar Registro',
        'collateral.list.empty.title': 'Portafolio VacÃ­o',
        'collateral.list.empty.subtitle': 'AÃ±ade tu primer activo para que podamos evaluarlo.',
        'collateral.list.requestCredit': 'Solicitar CrÃ©dito',
        'collateral.status.evaluating': 'Evaluando',

        'store.marketplace.title': 'Ventas por TasaciÃ³n',
        'store.marketplace.subtitle': 'Adquiere activos de lujo y tecnologÃ­a punta procedentes de liquidaciones.',
        'store.search.placeholder': 'Buscar por marca o modelo...',
        'store.opportunity': 'Oportunidad Exclusiva',
        'store.liquidatedPrice': 'Precio Liquidado',
        'store.buy': 'Comprar',
        'store.empty.title': 'Sin resultados',
        'store.empty.subtitle': 'No hemos encontrado artÃ­culos que coincidan.',

        'identity.center.title': 'Centro de Identidad',
        'identity.center.subtitle': 'MantÃ©n tus datos actualizados para mejores tasas.',
        'identity.center.label': 'Seguridad y Confianza',
        'identity.personal.title': 'Datos del Cliente',
        'identity.personal.subtitle': 'InformaciÃ³n oficial para contratos y pagos.',
        'identity.personal.submit': 'Actualizar Perfil',
        'identity.personal.success': 'InformaciÃ³n actualizada con Ã©xito.',
        'identity.personal.error': 'Error al procesar la actualizaciÃ³n.',
        'identity.kyc.title': 'VerificaciÃ³n ID',
        'identity.kyc.subtitle': 'DocumentaciÃ³n de seguridad obligatoria.',
        'identity.kyc.verified.title': 'Cuenta Oro Certificada',
        'identity.kyc.verified.subtitle': 'Tu identidad ha sido verificada. Tienes acceso completo a Secure.',
        'identity.kyc.pending.title': 'Estamos Validando',
        'identity.kyc.pending.subtitle': 'RecibirÃ¡s una notificaciÃ³n en cuanto el equipo valide los archivos.',
        'identity.kyc.rejected.title': 'Documento No VÃ¡lido',
        'identity.kyc.front': 'Anverso ID',
        'identity.kyc.back': 'Reverso ID',
        'identity.kyc.selfie': 'Selfie con ID',
        'identity.kyc.submit': 'Iniciar VerificaciÃ³n',

        'support.title': 'Estamos para ayudarte',
        'support.subtitle': 'Resuelve tus dudas en segundos o contacta con nuestro equipo.',
        'support.label': 'Centro de Soporte',
        'support.contact.title': 'Contacto Directo',
        'support.contact.subtitle': 'VÃ­as de comunicaciÃ³n rÃ¡pida.',
        'support.contact.call': 'LlÃ¡manos',
        'support.contact.email': 'E-mail',
        'support.contact.hours': 'Horario',
        'support.contact.office': 'Oficina',
        'support.faq.title': 'Preguntas Frecuentes',
        'support.form.title': 'Enviar Mensaje',
        'support.form.subtitle': 'Responderemos en menos de 24h.',
        'support.form.subject': 'Asunto',
        'support.form.category': 'CategorÃ­a',
        'support.form.message': 'Mensaje Detallado',
        'support.form.submit': 'Enviar Mensaje de Soporte',
        'support.form.sending': 'Enviando...',
        'support.form.success.title': 'Â¡Mensaje Enviado!',
        'support.form.success.subtitle': 'Hemos recibido tu consulta. Te contactaremos pronto en {email}.',
        'support.form.another': 'Enviar otro mensaje',
        'support.form.disclaimer': 'Al enviar este formulario, aceptas que nuestro equipo acceda a tu informaciÃ³n de cuenta para asistirte.',

        'landing.title': 'PrÃ©stamos rÃ¡pidos y seguros con garantÃ­a fÃ­sica',
        'landing.subtitle':
            'Solicita financiamiento a corto plazo dejando dispositivos aprobados como garantÃ­a. Transparente, auditable y seguro.',
        'landing.cta.apply': 'Solicitar ahora',
        'landing.cta.login': 'Ingresar',
        'landing.feature.fast': 'RevisiÃ³n rÃ¡pida en menos de 24 horas',
        'landing.feature.secure': 'Seguridad bancaria y trazabilidad clara',
        'landing.feature.rates': 'Tasas competitivas y planes claros',
        'landing.step.register': 'Registrarse',
        'landing.step.kyc': 'Verificar identidad',
        'landing.step.request': 'Solicitar prÃ©stamo',
        'landing.step.funded': 'Recibir fondos',
        'landing.footer': 'Â© 2026 Secure. Todos los derechos reservados.',

        'auth.login.title': 'Bienvenido de nuevo',
        'auth.login.subtitle': 'Inicia sesiÃ³n para continuar',
        'auth.login.cta': 'Iniciar sesiÃ³n',
        'auth.login.noAccount': 'Â¿No tienes cuenta?',
        'auth.login.signup': 'Crear cuenta',
        'auth.login.forgot': 'Â¿Olvidaste tu contraseÃ±a?',
        'auth.register.title': 'Crear cuenta',
        'auth.register.subtitle': 'Abre tu perfil seguro de prÃ©stamos',
        'auth.register.cta': 'Crear cuenta',
        'auth.register.haveAccount': 'Â¿Ya tienes cuenta?',
        'auth.register.signin': 'Inicia sesiÃ³n',
        'auth.forgot.title': 'Restablecer contraseÃ±a',
        'auth.forgot.subtitle': 'Te enviaremos instrucciones por correo',
        'auth.forgot.cta': 'Enviar enlace',
        'auth.reset.sent': 'Revisa tu correo para las instrucciones de restablecimiento.',
        'auth.error.credentials': 'Credenciales invÃ¡lidas. Intenta nuevamente.',
        'auth.error.passwordMismatch': 'Las contraseÃ±as no coinciden',
        'auth.error.passwordLength': 'La contraseÃ±a debe tener al menos 8 caracteres',
        'auth.error.inactive': 'Tu cuenta estÃ¡ {status}. Contacta a soporte.',
        'auth.error.roleMissing': 'No pudimos verificar tus permisos. Cierra sesiÃ³n y vuelve a ingresar.',

        'field.fullName': 'Nombre completo',
        'field.email': 'Correo electrÃ³nico',
        'field.phone': 'NÃºmero de telÃ©fono',
        'field.dob': 'Fecha de nacimiento',
        'field.password': 'ContraseÃ±a',
        'field.confirmPassword': 'Confirmar contraseÃ±a',
        'field.idType': 'Tipo de documento',
        'field.idNumber': 'NÃºmero de documento',
        'field.idExpiry': 'Fecha de vencimiento',
        'field.address': 'DirecciÃ³n',
        'field.city': 'Ciudad',
        'field.postalCode': 'CÃ³digo postal',
        'field.country': 'PaÃ­s',
        'field.amount': 'Monto',
        'field.term': 'Plazo (meses)',
        'field.purpose': 'PropÃ³sito',
        'field.description': 'DescripciÃ³n',
        'field.estimatedValue': 'Valor estimado (centavos)',
        'field.paymentReference': 'Referencia de pago',
        'field.paymentMethod': 'MÃ©todo de pago',
        'field.interestRate': 'Tasa de interÃ©s',

        'kyc.id.passport': 'Pasaporte',
        'kyc.id.national': 'Documento nacional',
        'kyc.id.drivers': 'Licencia de conducir',

        'loan.new.title': 'Simula y solicita un prÃ©stamo',
        'loan.new.subtitle': 'Todos los montos se almacenan en centavos enteros.',
        'loan.new.simulation': 'SimulaciÃ³n',
        'loan.new.monthlyPayment': 'Pago mensual estimado',
        'loan.new.totalCost': 'Pago total',
        'loan.new.submit': 'Enviar solicitud',
        'loan.new.success': 'Solicitud enviada para revisiÃ³n.',
        'loan.new.optionalCollateral': 'Opcional: vincula una garantÃ­a existente',
        'loan.new.termRange': 'Plazo permitido: {min}-{max} meses',
        'loan.new.amountRange': 'Monto permitido: {min} a {max}',

        'collateral.type.vehicle': 'VehÃ­culo',
        'collateral.type.property': 'Propiedad',
        'collateral.type.jewelry': 'JoyerÃ­a',
        'collateral.type.electronics': 'ElectrÃ³nica',
        'collateral.type.other': 'Otra',

        'loans.list.title': 'Tus prÃ©stamos',
        'loans.list.empty': 'No se encontraron prÃ©stamos.',
        'loans.details.title': 'Detalle del prÃ©stamo',
        'loans.details.balance': 'Saldo restante',
        'loans.details.status': 'Estado',
        'loans.details.payments': 'Pagos',

        'payments.title': 'Registrar un pago',
        'payments.subtitle': 'Proporciona la referencia del pago. Las cargas siguen desactivadas por defecto.',
        'payments.submit': 'Enviar pago',
        'payments.success': 'Pago enviado para confirmaciÃ³n.',
        'payments.confirmedBy': 'Confirmado por',
        'payments.selectLoan': 'Selecciona un prÃ©stamo',
        'payments.proofFileOptional': 'Archivo de soporte (opcional)',
        'payments.referenceLabel': 'Referencia',
        'payments.method.bank_transfer': 'Transferencia bancaria',
        'payments.method.cash': 'Efectivo',
        'payments.method.card': 'Tarjeta',
        'payments.method.mobile_money': 'Dinero mÃ³vil',

        'contract.title': 'Contrato y consentimiento',
        'contract.description': 'Revisa las obligaciones de los prÃ©stamos con garantÃ­a.',
        'contract.point1': 'Todos los desembolsos estÃ¡n respaldados por la garantÃ­a enviada.',
        'contract.point2': 'Los pagos se registran con bitÃ¡coras inmutables.',
        'contract.point3': 'El interÃ©s se calcula con la tasa anual acordada.',
        'contract.point4': 'Pagos tardÃ­os o faltantes pueden llevar a liquidar la garantÃ­a.',
        'contract.signatureLabel': 'Escribe tu nombre completo para firmar',
        'contract.signCta': 'Firmar y aceptar',
        'contract.signed': 'Firma guardada localmente para esta sesiÃ³n: {signature}',

        'loyalty.title': 'Estado de lealtad',
        'loyalty.subtitle': 'ObtÃ©n mejores tasas pagando a tiempo.',
        'loyalty.tier': 'Nivel',
        'loyalty.points': 'Puntos',
        'loyalty.nextTier': 'Siguiente nivel en',

        'help.title': 'Ayuda y guÃ­a',
        'help.contact': 'Â¿Necesitas ayuda? Contacta soporte.',
        'help.faq.eligibility.q': 'Â¿QuiÃ©n puede solicitar un prÃ©stamo?',
        'help.faq.eligibility.a': 'Clientes registrados que completen KYC y ofrezcan garantÃ­as aceptables.',
        'help.faq.payments.q': 'Â¿CÃ³mo se confirma un pago?',
        'help.faq.payments.a': 'EnvÃ­a la referencia de pago; un administrador la revisarÃ¡ y confirmarÃ¡.',
        'help.faq.uploads.q': 'Â¿Por quÃ© las cargas estÃ¡n desactivadas?',
        'help.faq.uploads.a': 'El almacenamiento estÃ¡ bloqueado por seguridad. ActÃ­valo solo tras revisar las reglas.',

        'admin.dashboard.title': 'Panel de administraciÃ³n',
        'admin.dashboard.subtitle': 'Revisa solicitudes, gestiona prÃ©stamos y controles.',
        'admin.requests.title': 'Solicitudes de prÃ©stamo',
        'admin.requests.subtitle': 'Solicitudes pendientes y en revisiÃ³n',
        'admin.requests.empty': 'AÃºn no hay solicitudes.',
        'admin.requests.pending': 'Pendiente',
        'admin.requests.review': 'Revisar',
        'admin.requestDetails.title': 'Detalle de solicitud',
        'admin.requestDetails.approve': 'Aprobar y crear prÃ©stamo',
        'admin.requestDetails.reject': 'Rechazar solicitud',
        'admin.requestDetails.rejectionReason': 'Motivo de rechazo',
        'admin.requestDetails.success': 'DecisiÃ³n registrada y auditada.',

        'admin.loans.title': 'Todos los prÃ©stamos',
        'admin.loans.subtitle': 'Resumen de cartera',
        'admin.loans.empty': 'No hay prÃ©stamos que mostrar.',
        'admin.loanDetails.title': 'Gestionar prÃ©stamo',
        'admin.loanDetails.confirmPayment': 'Confirmar pago',
        'admin.loanDetails.rejectPayment': 'Rechazar pago',

        'admin.settings.title': 'ConfiguraciÃ³n del negocio',
        'admin.settings.subtitle': 'Define lÃ­mites operativos seguros.',
        'admin.settings.save': 'Actualizar configuraciÃ³n',
        'admin.settings.success': 'ConfiguraciÃ³n actualizada.',
        'admin.settings.maintenance': 'Modo de mantenimiento',
        'admin.settings.maxAmount': 'Monto mÃ¡ximo del prÃ©stamo (centavos)',
        'admin.settings.minAmount': 'Monto mÃ­nimo del prÃ©stamo (centavos)',
        'admin.settings.maxTerm': 'Plazo mÃ¡ximo (meses)',
        'admin.settings.minTerm': 'Plazo mÃ­nimo (meses)',

        'admin.audit.title': 'BitÃ¡cora de auditorÃ­a',
        'admin.audit.subtitle': 'Registro inmutable de acciones administrativas.',
        'admin.audit.empty': 'Sin registros aÃºn.',
        'nav.clients': 'Clientes',
    },
    fr: {
        'common.appName': 'PrÃªts avec Garantie Secure',
        'common.shortName': 'Secure',
        'common.languageLabel': 'Langue',
        'common.logout': 'Se dÃ©connecter',
        'common.loading': 'Chargement...',
        'common.save': 'Enregistrer',
        'common.cancel': 'Annuler',
        'common.submit': 'Envoyer',
        'common.approve': 'Approuver',
        'common.reject': 'Rejeter',
        'common.view': 'Voir',
        'common.error.generic': 'Une erreur est survenue. RÃ©essayez.',
        'common.storage.disabled': "Les tÃ©lÃ©versements sont dÃ©sactivÃ©s. Fournissez une preuve textuelle Ã  la place.",
        'common.status.active': 'Actif',
        'common.status.pending': 'En attente',
        'common.status.rejected': 'RejetÃ©',
        'common.status.approved': 'ApprouvÃ©',
        'common.status.submitted': 'EnvoyÃ©',
        'common.status.confirmed': 'ConfirmÃ©',
        'common.status.underReview': 'En cours de revue',
        'nav.dashboard': 'Tableau de bord',
        'nav.identity': 'IdentitÃ©',
        'nav.collateral': 'Garantie',
        'nav.loans': 'PrÃªts',
        'nav.payments': 'Paiements',
        'nav.help': 'Aide',
        'nav.requests': 'Demandes',
        'nav.settings': 'ParamÃ¨tres',
        'nav.audit': 'Audit',
        'nav.admin': 'Admin',
        'nav.customer': 'Client',
        'nav.marketplace': 'MarchÃ©',
        'nav.support': 'Support',
        'nav.profile': 'Mon Profil',

        'greeting.morning': 'Bon matin',
        'greeting.afternoon': 'Bon aprÃ¨s-midi',
        'greeting.evening': 'Bonsoir',

        'dashboard.hello': 'Bonjour, {name} ðŸ‘‹',
        'dashboard.welcomeText': 'Bienvenue au centre financier Secure. Vous avez {count} prÃªts actifs.',
        'dashboard.totalDebt': 'Dette Totale',
        'dashboard.estimatedLimit': 'Limite EstimÃ©e',
        'dashboard.status.secure': 'Statut Secure',
        'dashboard.identity.status': 'IdentitÃ©',
        'dashboard.identity.verified': 'VÃ©rifiÃ©',
        'dashboard.identity.pending': 'En attente',
        'dashboard.identity.complete': 'ComplÃ©ter Profil',
        'dashboard.activity.title': 'ActivitÃ© en direct',
        'dashboard.activity.subtitle': 'Suivez vos demandes',
        'dashboard.activity.history': 'Voir Historique',
        'dashboard.activity.empty': 'Pas encore de mouvements.',
        'dashboard.store.title': 'Meilleures Offres',
        'dashboard.store.subtitle': 'Boutique SpÃ©ciale',
        'dashboard.store.cta': 'Faire du Shopping',
        'dashboard.help.title': 'Des doutes ?',
        'dashboard.help.subtitle': 'Support 24/7',

        'collateral.manage.title': 'Mes Objets',
        'collateral.manage.subtitle': 'Enregistrez les articles pour une Ã©valuation immÃ©diate.',
        'collateral.manage.label': 'Gestion des Actifs',
        'collateral.add.cta': 'Ajouter Actif',
        'collateral.add.subcta': 'Nouveau Gage',
        'collateral.form.title': 'Enregistrement de Objet',
        'collateral.form.subtitle': 'ComplÃ©tez la fiche technique pour une Ã©valuation initiale.',
        'collateral.form.category': 'CatÃ©gorie de Objet',
        'collateral.form.brandModel': 'Marque et ModÃ¨le',
        'collateral.form.serial': 'Identification (IMEI/SN)',
        'collateral.form.condition': 'Ã‰tat de Conservation',
        'collateral.form.estimatedValue': 'Valeur EstimÃ©e (â‚¬)',
        'collateral.form.photos': 'Archives Photos (Min 3)',
        'collateral.form.addPhoto': 'Ajouter Photo',
        'collateral.form.submit': 'Terminer Enregistrement',
        'collateral.list.empty.title': 'Portefeuille Vide',
        'collateral.list.empty.subtitle': 'Ajoutez votre premier actif dÃ¨s maintenant.',
        'collateral.list.requestCredit': 'Demander CrÃ©dit',
        'collateral.status.evaluating': 'Ã‰valuation',

        'store.marketplace.title': 'Ventes par Ã‰valuation',
        'store.marketplace.subtitle': 'AcquÃ©rez des actifs de luxe issus de liquidations.',
        'store.search.placeholder': 'Rechercher par marque...',
        'store.opportunity': 'OpportunitÃ© Exclusive',
        'store.liquidatedPrice': 'Prix LiquidÃ©',
        'store.buy': 'Acheter',
        'store.empty.title': 'Aucun rÃ©sultat',
        'store.empty.subtitle': 'Aucun article ne correspond Ã  votre recherche.',

        'identity.center.title': "Centre d'IdentitÃ©",
        'identity.center.subtitle': 'Gardez vos donnÃ©es Ã  jour pour de meilleurs taux.',
        'identity.center.label': 'SÃ©curitÃ© et Confiance',
        'identity.personal.title': 'DonnÃ©es Client',
        'identity.personal.subtitle': 'Infos officielles pour contrats et paiements.',
        'identity.personal.submit': 'Mettre Ã  jour',
        'identity.personal.success': 'Infos mises Ã  jour avec succÃ¨s.',
        'identity.personal.error': 'Erreur lors de la mise Ã  jour.',
        'identity.kyc.title': 'VÃ©rification ID',
        'identity.kyc.subtitle': 'Documentation de sÃ©curitÃ© obligatoire.',
        'identity.kyc.verified.title': 'Compte Or CertifiÃ©',
        'identity.kyc.verified.subtitle': 'Votre identitÃ© est vÃ©rifiÃ©e. AccÃ¨s total Ã  Secure.',
        'identity.kyc.pending.title': 'Validation',
        'identity.kyc.pending.subtitle': 'Nous vous notifierons une fois validÃ©.',
        'identity.kyc.rejected.title': 'Document Invalide',
        'identity.kyc.front': 'Recto ID',
        'identity.kyc.back': 'Verso ID',
        'identity.kyc.selfie': 'Selfie avec ID',
        'identity.kyc.submit': 'Lancer VÃ©rification',

        'support.title': 'Nous sommes lÃ  pour vous',
        'support.subtitle': 'RÃ©solvez vos doutes en quelques secondes ou contactez notre Ã©quipe.',
        'support.label': 'Centre de Support',
        'support.contact.title': 'Contact Direct',
        'support.contact.subtitle': 'Canaux de communication rapides.',
        'support.contact.call': 'Appelez-nous',
        'support.contact.email': 'E-mail',
        'support.contact.hours': 'Horaires',
        'support.contact.office': 'Bureau',
        'support.faq.title': 'Questions FrÃ©quentes',
        'support.form.title': 'Envoyer Message',
        'support.form.subtitle': 'Nous rÃ©pondrons en moins de 24h.',
        'support.form.subject': 'Sujet',
        'support.form.category': 'CatÃ©gorie',
        'support.form.message': 'Message DÃ©taillÃ©',
        'support.form.submit': 'Envoyer Message Support',
        'support.form.sending': 'Envoi...',
        'support.form.success.title': 'Message EnvoyÃ© !',
        'support.form.success.subtitle': 'Nous avons reÃ§u votre demande. Nous vous contacterons Ã  {email}.',
        'support.form.another': 'Envoyer un autre message',
        'support.form.disclaimer': 'En envoyant ce formulaire, vous acceptez que notre Ã©quipe accÃ¨de Ã  vos infos.',

        'landing.title': 'PrÃªts rapides et sÃ©curisÃ©s avec garantie physique',
        'landing.subtitle':
            'Demandez un financement court terme en dÃ©posant des appareils approuvÃ©s comme garantie. Transparent, auditable et sÃ»r.',
        'landing.cta.apply': 'Demander maintenant',
        'landing.cta.login': 'Connexion',
        'landing.feature.fast': 'Revue rapide en moins de 24 h',
        'landing.feature.secure': 'SÃ©curitÃ© bancaire et traÃ§abilitÃ© claire',
        'landing.feature.rates': 'Taux compÃ©titifs et plans limpides',
        'landing.step.register': "S'inscrire",
        'landing.step.kyc': "VÃ©rifier l'identitÃ©",
        'landing.step.request': 'Demander un prÃªt',
        'landing.step.funded': 'Recevoir les fonds',
        'landing.footer': 'Â© 2026 Secure. Tous droits rÃ©servÃ©s.',

        'auth.login.title': 'Content de vous revoir',
        'auth.login.subtitle': 'Connectez-vous pour continuer',
        'auth.login.cta': 'Se connecter',
        'auth.login.noAccount': "Pas encore de compte ?",
        'auth.login.signup': 'CrÃ©er un compte',
        'auth.login.forgot': 'Mot de passe oubliÃ© ?',
        'auth.register.title': 'CrÃ©er un compte',
        'auth.register.subtitle': 'Ouvrez votre profil de prÃªt sÃ©curisÃ©',
        'auth.register.cta': 'CrÃ©er un compte',
        'auth.register.haveAccount': 'Vous avez dÃ©jÃ  un compte ?',
        'auth.register.signin': 'Se connecter',
        'auth.forgot.title': 'RÃ©initialiser le mot de passe',
        'auth.forgot.subtitle': 'Nous vous enverrons des instructions par e-mail',
        'auth.forgot.cta': 'Envoyer le lien',
        'auth.reset.sent': 'VÃ©rifiez votre email pour les instructions.',
        'auth.error.credentials': 'Identifiants invalides. RÃ©essayez.',
        'auth.error.passwordMismatch': 'Les mots de passe ne correspondent pas',
        'auth.error.passwordLength': 'Le mot de passe doit contenir au moins 8 caractÃ¨res',
        'auth.error.inactive': 'Votre compte est actuellement {status}. Contactez le support.',
        'auth.error.roleMissing':
            'Nous ne pouvons pas vÃ©rifier vos permissions. DÃ©connectez-vous puis reconnectez-vous.',

        'field.fullName': 'Nom complet',
        'field.email': 'Email',
        'field.phone': 'TÃ©lÃ©phone',
        'field.dob': 'Date de naissance',
        'field.password': 'Mot de passe',
        'field.confirmPassword': 'Confirmer le mot de passe',
        'field.idType': "Type d'identitÃ©",
        'field.idNumber': "NumÃ©ro d'identitÃ©",
        'field.idExpiry': "Date d'expiration",
        'field.address': 'Adresse',
        'field.city': 'Ville',
        'field.postalCode': 'Code postal',
        'field.country': 'Pays',
        'field.amount': 'Montant',
        'field.term': 'DurÃ©e (mois)',
        'field.purpose': 'Objet',
        'field.description': 'Description',
        'field.estimatedValue': 'Valeur estimÃ©e (centimes)',
        'field.paymentReference': 'RÃ©fÃ©rence de paiement',
        'field.paymentMethod': 'MÃ©thode de paiement',
        'field.interestRate': "Taux d'intÃ©rÃªt",

        'kyc.id.passport': 'Passeport',
        'kyc.id.national': "Carte d'identitÃ©",
        'kyc.id.drivers': 'Permis de conduire',

        'loan.new.title': 'Simuler et demander un prÃªt',
        'loan.new.subtitle': 'Tous les montants sont stockÃ©s en centimes entiers.',
        'loan.new.simulation': 'Simulation',
        'loan.new.monthlyPayment': 'Paiement mensuel estimÃ©',
        'loan.new.totalCost': 'Remboursement total',
        'loan.new.submit': 'Envoyer la demande',
        'loan.new.success': 'Demande envoyÃ©e pour revue.',
        'loan.new.optionalCollateral': 'Optionnel : lier une garantie existante',
        'loan.new.termRange': 'DurÃ©e autorisÃ©e : {min}-{max} mois',
        'loan.new.amountRange': 'Montant autorisÃ© : {min} Ã  {max}',

        'collateral.type.vehicle': 'VÃ©hicule',
        'collateral.type.property': 'PropriÃ©tÃ©',
        'collateral.type.jewelry': 'Bijoux',
        'collateral.type.electronics': 'Ã‰lectronique',
        'collateral.type.other': 'Autre',

        'loans.list.title': 'Vos prÃªts',
        'loans.list.empty': 'Aucun prÃªt trouvÃ©.',
        'loans.details.title': 'DÃ©tails du prÃªt',
        'loans.details.balance': 'Solde restant',
        'loans.details.status': 'Statut',
        'loans.details.payments': 'Paiements',

        'payments.title': 'Enregistrer un paiement',
        'payments.subtitle': 'Fournissez la rÃ©fÃ©rence du paiement. Les tÃ©lÃ©versements restent dÃ©sactivÃ©s par dÃ©faut.',
        'payments.submit': 'Envoyer le paiement',
        'payments.success': 'Paiement envoyÃ© pour confirmation.',
        'payments.confirmedBy': 'ConfirmÃ© par',
        'payments.selectLoan': 'SÃ©lectionnez un prÃªt',
        'payments.proofFileOptional': 'Fichier justificatif (optionnel)',
        'payments.referenceLabel': 'RÃ©fÃ©rence',
        'payments.method.bank_transfer': 'Virement bancaire',
        'payments.method.cash': 'EspÃ¨ces',
        'payments.method.card': 'Carte',
        'payments.method.mobile_money': 'Mobile money',

        'contract.title': 'Contrat et consentement',
        'contract.description': 'Passez en revue les obligations du prÃªt garanti.',
        'contract.point1': 'Tous les dÃ©caissements sont garantis par le dÃ©pÃ´t.',
        'contract.point2': "Les paiements sont journalisÃ©s de faÃ§on immuable.",
        'contract.point3': "Les intÃ©rÃªts sont calculÃ©s au taux annuel convenu.",
        'contract.point4': 'Les retards peuvent conduire Ã  la liquidation de la garantie.',
        'contract.signatureLabel': 'Tapez votre nom complet pour signer',
        'contract.signCta': 'Signer et accepter',
        'contract.signed': 'Signature enregistrÃ©e localement pour cette session : {signature}',

        'loyalty.title': 'Statut de fidÃ©litÃ©',
        'loyalty.subtitle': 'Obtenez de meilleurs taux avec des paiements ponctuels.',
        'loyalty.tier': 'Niveau',
        'loyalty.points': 'Points',
        'loyalty.nextTier': 'Prochain niveau Ã ',

        'help.title': 'Aide et guide',
        'help.contact': "Besoin d'aide ? Contactez le support.",
        'help.faq.eligibility.q': 'Qui peut demander un prÃªt ?',
        'help.faq.eligibility.a': 'Les clients inscrits ayant complÃ©tÃ© le KYC et fourni une garantie acceptable.',
        'help.faq.payments.q': 'Comment confirmer un paiement ?',
        'help.faq.payments.a': 'Envoyez la rÃ©fÃ©rence de paiement ; un administrateur la vÃ©rifiera.',
        'help.faq.uploads.q': 'Pourquoi les tÃ©lÃ©versements sont-ils dÃ©sactivÃ©s ?',
        'help.faq.uploads.a':
            "Le stockage est verrouillÃ© par sÃ©curitÃ©. Activez-le uniquement aprÃ¨s avoir revu les rÃ¨gles.",

        'admin.dashboard.title': "Tableau d'administration",
        'admin.dashboard.subtitle': 'Revoir les demandes, gÃ©rer les prÃªts et appliquer les contrÃ´les.',
        'admin.requests.title': 'Demandes de prÃªt',
        'admin.requests.subtitle': 'Demandes en attente et en revue',
        'admin.requests.empty': 'Aucune demande pour le moment.',
        'admin.requests.pending': 'En attente',
        'admin.requests.review': 'Revoir',
        'admin.requestDetails.title': 'DÃ©tail de la demande',
        'admin.requestDetails.approve': 'Approuver et crÃ©er le prÃªt',
        'admin.requestDetails.reject': 'Rejeter la demande',
        'admin.requestDetails.rejectionReason': 'Motif du rejet',
        'admin.requestDetails.success': 'DÃ©cision enregistrÃ©e et auditÃ©e.',

        'admin.loans.title': 'Tous les prÃªts',
        'admin.loans.subtitle': 'Vue du portefeuille',
        'admin.loans.empty': 'Aucun prÃªt Ã  afficher.',
        'admin.loanDetails.title': 'GÃ©rer le prÃªt',
        'admin.loanDetails.confirmPayment': 'Confirmer le paiement',
        'admin.loanDetails.rejectPayment': 'Rejeter le paiement',

        'admin.settings.title': "ParamÃ¨tres d'exploitation",
        'admin.settings.subtitle': 'DÃ©finissez des limites sÃ»res.',
        'admin.settings.save': 'Mettre Ã  jour',
        'admin.settings.success': 'ParamÃ¨tres mis Ã  jour.',
        'admin.settings.maintenance': 'Mode maintenance',
        'admin.settings.maxAmount': 'Montant maximal du prÃªt (centimes)',
        'admin.settings.minAmount': 'Montant minimal du prÃªt (centimes)',
        'admin.settings.maxTerm': 'DurÃ©e maximale (mois)',
        'admin.settings.minTerm': 'DurÃ©e minimale (mois)',

        'admin.audit.title': "Journal d'audit",
        'admin.audit.subtitle': 'Enregistrement immuable des actions administratives.',
        'admin.audit.empty': 'Aucune entrÃ©e pour le moment.',
        'nav.clients': 'Clients',
    },
};

interface I18nContextValue {
    locale: Locale;
    setLocale: (locale: Locale) => void;
    t: (key: string, params?: Record<string, string | number>) => string;
}

const I18nContext = createContext<I18nContextValue | undefined>(undefined);

function interpolate(template: string, params?: Record<string, string | number>) {
    if (!params) return template;
    return Object.entries(params).reduce((acc, [key, value]) => {
        return acc.replace(`{${key}}`, String(value));
    }, template);
}

export function I18nProvider({ children }: { children: React.ReactNode }) {
    const storage =
        typeof window !== 'undefined' &&
            typeof window.localStorage !== 'undefined' &&
            typeof window.localStorage.getItem === 'function' &&
            typeof window.localStorage.setItem === 'function'
            ? window.localStorage
            : null;

    const [locale, setLocaleState] = useState<Locale>(() => {
        const stored = storage ? storage.getItem('locale') : null;
        if (stored === 'es' || stored === 'fr' || stored === 'en') return stored;
        return 'en';
    });

    useEffect(() => {
        if (storage) {
            storage.setItem('locale', locale);
        }
    }, [locale, storage]);

    const value = useMemo<I18nContextValue>(() => {
        const translate = (key: string, params?: Record<string, string | number>) => {
            const localized = translations[locale][key];
            const fallback = translations.en[key];
            return interpolate(localized || fallback || key, params);
        };

        return {
            locale,
            setLocale: (newLocale: Locale) => setLocaleState(newLocale),
            t: translate,
        };
    }, [locale]);

    return <I18nContext.Provider value={value}>{children}</I18nContext.Provider>;
}

export function useI18n() {
    const context = useContext(I18nContext);
    if (!context) {
        throw new Error('useI18n must be used within I18nProvider');
    }
    return context;
}
